# Dealing with revocations of user keys in OpenPGP CA

Revoking an OpenPGP key means that we mark that key as no longer valid.
The cryptographic artifact that embodies the revocation is called a
"revocation certificate".
Revocation certificates can be published so that third parties will see the
information that this key should not be used anymore (e.g. via WKD).

There are different reasons why we might want to revoke a user's OpenPGP
key. For example, the user's key might have been compromised, or the user has
left our organization. Revocation certificates contain information about
the reason why the affected OpenPGP key has been revoked.

In OpenPGP, to be able to generate a revocation certificate for a key,
the private part of that key is needed. This means that in the OpenPGP
paradigm, revocations can typically only be generated by the user themselves.

In OpenPGP CA, while we don't centrally store users' private keys, we do
(optionally) centrally store revocation certificates for our users' keys.

(This means that the OpenPGP CA admin can choose to invalidate users' keys -
or, if the OpenPGP CA data, including the revocation certificates are
compromised, a third party is able to invalidate one or many user keys,
thus performing a kind of denial of service attack against our OpenPGP usage)


For every user, one or many revocation certificates may be stored in OpenPGP
CA.

To check which revocation certificates exist for a given user, we can query
by email:

`$ openpgp-ca -d example.oca user show-revocations --email alice@example.org`

The results show a numeric "revocation id". These IDs identify specific
individual revocation certificates.

When we've determined which revocation certificate we want to apply, we can
apply that revocation to the user's key:

`$ openpgp-ca -d example.oca user apply-revocation --id 2`

Afterwards, "show-revocations" will display the additional note: "this
revocation has been PUBLISHED", and the user's public key contains the
revocation certificate.

As this version of the user's key gets disseminated, the OpenPGP
implementations of third parties learn that the key should no longer be used.

The updated public key with the included revocation can be exported by running
 
`$ openpgp-ca -d example.oca user export --email 'alice@example.org'`
