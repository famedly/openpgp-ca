# Copyright 2019 Heiko Schaefer heiko@schaefer.name
#
# This file is part of OpenPGP CA.
#
# OpenPGP CA is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# OpenPGP CA is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with OpenPGP CA.  If not, see <https://www.gnu.org/licenses/>.

name: openpgp-ca
version: "0.0.1"
author: Heiko Sch√§fer <heiko@schaefer.name>
about: openpgp-ca is a tool to manage OpenPGP setups
settings:
  - ArgRequiredElseHelp
args:
  - database:
      short: d
      long: database
      value_name: FILE
      help: Sets a custom sqlite file
      takes_value: true
subcommands:
  - init:
      about: Initialize OpenPGP CA
  - ca:
      about: Manage CA
      subcommands:
        - new:
            about: Create CA
            args:
              - email:
                  takes_value: true
                  help: CA email
        - show:
            about: Show CA
        - export:
            about: Export CA public key
  - user:
      about: Manage Users
      subcommands:
        - add:
            about: Add User (create new Key-Pair)
            args:
              - email:
                  takes_value: true
                  short: e
                  long: email
                  multiple: true
                  help: Email address
              - name:
                  takes_value: true
                  short: n
                  long: name
                  help: Name
              - key-profile:
                  takes_value: true
                  long: key_profile
                  help: Key Profile
        - import:
            about: Import User (use existing Public Key)
            args:
              - email:
                  takes_value: true
                  short: e
                  long: email
                  multiple: true
                  help: Email address
              - name:
                  takes_value: true
                  short: n
                  long: name
                  help: Name
              - key-file:
                  takes_value: true
                  long: key_file
                  help: File that contains the User's Public Key
              - revocation-file:
                  takes_value: true
                  short: r
                  long: revocation_file
                  help: File that contains the User's revocation cert
        - export:
            about: Export User Public Key (bulk, if no email address is given)
            args:
              - email:
                  takes_value: true
                  short: e
                  long: email
                  help: Email address
        - revoke:
            about: Revoke Key
        - list:
            about: List Users
  - bridge:
      about: Manage Bridges
      subcommands:
        - new:
            about: Add New Bridge (sign existing remote CA Public Key)
            args:
              - name:
                  takes_value: true
                  short: n
                  long: name
                  help: Bridge Name
              - regex:
                  takes_value: true
                  short: r
                  long: regex
                  multiple: true
                  help: Regex
              - remote-key-file:
                  takes_value: true
                  long: remote_key_file
                  help: File that contains the remote CA's Public Key
        - revoke:
            about: Revoke Bridge
            args:
              - name:
                  takes_value: true
                  short: n
                  long: name
                  help: Bridge Name
        - list:
            about: List Bridges
  - directory:
      about: Manage Directories
      subcommands:
        - add:
            about: Add Directory
        - delete:
            about: Delete Directory from CA
  - key-profile:
      about: Manage key-profiles
      subcommands:
        - add:
            about: Add key-profile
        - delete:
            about: Delete key-profile